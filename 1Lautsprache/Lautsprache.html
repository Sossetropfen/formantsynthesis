<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Speech Synthesis - A learning experience!</title>

    <!-- Bootstrap einbinden -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="lautsprache-style.css" />

    <!-- GoogleFont einbinden -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <!-- header -->
    <div class="headerbalken">
        <img src="\assets/header.svg" class="headerbild">
        </img>
    </div>
</head>

<body>


    <!--<div class="container">
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-7"></div>
        <div class="col-md-2"></div>
    </div>
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-7"></div>
        <div class="col-md-2"></div>
    </div>
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-4"></div>
        <div class="col-md-3"></div>-->



    <!--<img src="header_1.png" alt="progress - text pre-processing" width="100%">-->

    <!--Hintergrund weiß-->

    <!--Collumns (12) öffnen - wegen der Karte mit dem Info-Btn daneben-->
        <!-- container nach überschrift und i anfangen um verschiebung zu vermeiden-->
        <div class="container-fluid">
            <div class="row">
        <!--Überschrift-->
    <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 ml-5 pl-5 ml-xs-2 pt-2">
    
     <h1>I. Symbolic Pre-Processing</h1>

     <p>Welcome to world of speech signal generation. In our first step of the journey we are learning more
         about text pre-processing, exception handling, grapheme-to-phoneme transformation and more. Your
         previous input will undergo multiple steps and will ultimately be played back to you through your
         speakers.</p>
        
    </div>
         <div class=" col-sm-1 col-md-1 col-lg-1">
         <!-- InfoBox-SVG -->
         <svg type="button" data-toggle="modal" data-target="#infotextModal" width="4rem" height="4rem"
         viewBox="0 0 87 89" fill="none" xmlns="http://www.w3.org/2000/svg" id="info">
         <g filter="url(#filter0_d)">
             <rect x="4" width="79" height="81" rx="20" fill="#628BC8" />
         </g>
         <path d="M37.05 30.15V23.5H43.75V30.15H37.05ZM37.05 60V33.8H43.75V60H37.05Z" fill="white" />
         <defs>
             <filter id="filter0_d" x="0" y="0" width="87" height="89" filterUnits="userSpaceOnUse"
                 color-interpolation-filters="sRGB">
                 <feFlood flood-opacity="0" result="BackgroundImageFix" />
                 <feColorMatrix in="SourceAlpha" type="matrix"
                     values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                 <feOffset dy="4" />
                 <feGaussianBlur stdDeviation="2" />
                 <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                 <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                 <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
             </filter>
         </defs>
     </svg>
     </div>

        </div>
        </div>   
   
        <div class="container-fluid">
        <div class="row">


            <!-- links - leer -->
            <div class="col-sm-2 col-md-2 col-lg-2"></div>

            <!-- Mitte - Hauptteil -->
            <div class="col-xs-6 col-sm-8 col-md-8 col-lg-8">


                <!--Karte blau-->
                <div class="container my-5">
                    <div class="card " id="card">
                        <div class="card-body" id="card-body">
                            <p class="pl-3 pr-3">We transformed your input sentence from English to International Phonetic Alphabet (IPA).
                            </p>
                            <div class="graubox">
                                <button type="button" id="inputSentence" class="btn btn-link btn-sm"
                                    data-toggle="popover" data-placement="top" data-trigger="focus" data-html="true"
                                    title="Translation explanation"
                                    data-content="Dieser Text wird später durch Bausteine Erklärung ersetzt.">content</button>
                                <p id="inputSentenceIPA" class="pl-3">content</p>
                            </div>
                            <p class="pl-3 pr-3 small"><br>Hint: If you want to learn more you can click on the sentence of your input or check out the info box in the upper right corner.</p>
                        </div>
                    </div>
                </div>

                <!--Content unten drunter-->
                <!-- interne rows für graphic/text-->
                <div class="row">
                    <div class="col-md-6 col-lg-8 col-xs-7">
                        <div class="my-5">
                            <h1 id="heading">How does this work?</h1>
                            <p>blablabla</p>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-2 col-xs-1 col-sm-3 ml-sm-5 ml-sm-5 mt-lg-5 mt-md-5">
                        <img src="\assets\keyboard_graphic.png" id="keyboardpng">
                        </img>
                    </div>



                    <div class="my-5">
                        <h1 id="heading">Do you want to edit your Input?</h1>
                        <p>Soon you will able to use our phonetics keyboard to to modify, delete, and change your IPA
                            text. Further you can use special characters to put stress on certain parts of the sentence.
                            Feel free to experiment with the IPA characters to your own liking.</p>
                    </div>

                    <div class="mt-5 ">
                        <h1 id="heading">"Check yourself"-Corner </h1>

                        <div class="row">
                            <div class="col-md-4 col-lg-4 col-xs-6">
                                <img src="\assets\graphic_quiz_laptop.png" id="quizbild">
                                </img>
                            </div>
                            <div class="col-md-8 col-lg-8 col-xs-6">
                                <p>Ever wondered how a TTS-system handles exceptions like foreign words or proper names?
                                    Interested in puzzling together the “Ortographic text ➔ Symbolic
                                    description”-flowchart?</p>
                                <p>Check out those questions and more in the quiz down below:</p>
                            </div>
                        </div>
                        <!--Quiz einbinden-->
                        <div class="row">
                            <div class="col-md-6 col-lg-8 col-xs-6">
                                <span class="font-weight-light font-italic align-left"> Start the quiz</span>

                                <!-- Quiz Starts Dreieck - Collapsable -->
                                <button class="btn" type="button" onclick="window.location.href='../1Lautsprache/Quiz.html'"
                                    aria-expanded="false" aria-controls="collapseQuiz1">
                                    <svg width="47" height="55" viewBox="0 0 47 55" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M43.6172 22.3797C47.4471 24.719 47.4471 30.281 43.6172 32.6204L9.37761 53.5346C5.37946 55.9768 0.25 53.0993 0.25 48.4142V6.58576C0.25 1.90075 5.37946 -0.976749 9.37761 1.4654L43.6172 22.3797Z"
                                            fill="#628BC8" />
                                    </svg>
                                </button>
                            </div>
                        </div>


                    </div>



                </div>


            </div>


            <!-- rechts -->
            <div class=" col-sm-1 col-md-2 col-lg-2">

                <!-- Modal -->
                <div class="modal fade" id="infotextModal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog rounded-lg" role="document">
                        <div class="modal-content rounded-lg">
                            <div class="modal-body">
                                <h3>How to use?</h3>
                                <!--Dieser Teil muss noch hescheit befüllt werden. Genau genommen sollte am besten noch mehr Erklärung hinein-->
                                <p>You're are now in the step of symbolic pre-processing. Here you can see your
                                    pre-processed sentence from before,
                                    with additional explanation. You can hover over the single words to lern more about
                                    the special transformation wich was used
                                    or modify it yourself with the IPA keyboard beneath and see what happens based on
                                    your input.<br>
                                    We tried to give as much visualisation as possible. <br>
                                    You’ll also have quiz parts at every section, to test your knowledge. Whether you
                                    work in depth or just
                                    play around is up to you!
                                    <button type="button" class="btn btn-secondary btn-sm rounded-lg float-right mt-3"
                                        data-dismiss="modal">Close</button>
                                </p>

                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>

    </div>


    <!------------------------------Der footer-------------------------->
    <div class="container-fluid my-5">
         <div class="row">
            <!--alles in eins statt 3 colums-->


            <div class="col-lg-12 col-md-10 col-sm-10 ">
                <div class="float-left">
                    <!--DER back-bUTTON-->
                    <a href="../0Landing\landing.html" class="btn " role="button">
                        <button class="btn">
                            <svg width="48" height="54" viewBox="0 0 48 54" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M2.99999 31.8003C-1.00001 29.4909 -1 23.7174 3 21.408L38.4062 0.966175C42.4062 -1.34322 47.4062 1.54353 47.4062 6.16233L47.4062 47.0459C47.4062 51.6647 42.4062 54.5515 38.4062 52.242L2.99999 31.8003Z"
                                    fill="#628BC8" />
                            </svg>
                        </button>
                        <!--DER WEITER-text-->
                        <span class="font-weight-light">Back</span>
                    </a>
                </div>
            
                <div class="float-right">
                    <a href="../2Fujisaki\fujisaki.html" class="btn" role="button">
                        <!--DER WEITER-text-->
                        <span class="font-weight-light ">Next</span>
                        <!-- Das Weiter Dreieck -->
                        <button class="btn">
                            <svg width="47" height="55" viewBox="0 0 47 55" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M43.6172 22.3797C47.4471 24.719 47.4471 30.281 43.6172 32.6204L9.37761 53.5346C5.37946 55.9768 0.25 53.0993 0.25 48.4142V6.58576C0.25 1.90075 5.37946 -0.976749 9.37761 1.4654L43.6172 22.3797Z"
                                    fill="#628BC8" />
                            </svg>
                        </button>
                    </a>
                </div>
            </div>

        </div>
    </div>
    <!-- Footer unten -->
    <div class="container">
        <div class="row">

            <div class="col-lg-5 col-md-5 col-sm-4 col-xs-12">
                <span class="small"><a class="btn" href="">Impressum</a></span>
            </div>

            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                <span class="small"><a class="btn" href="">Data Privacy</a></span>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                <span class="small"> <a class="btn" href="">Copyright</a></span>
            </div>
        </div>
        <br>
    </div>



</body>


<!-- von Bootstrap benötigtes JS: jQuery library, Popper JS, Latest compiled JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script>
    var inputSentenceIPA = sessionStorage.getItem("inputSentenceIPA");
    var inputSentence = sessionStorage.getItem("inputSentence");
    console.log(inputSentenceIPA);
    document.getElementById('inputSentence').innerHTML = inputSentence;
    document.getElementById('inputSentenceIPA').innerHTML = "→ " + inputSentenceIPA;

    //Für Popover, das nochmal genauer das zustandekommen der übersetzung erklärt
    //Berechne String der Teilwörter erklärt

    var erklaerungstext = "Here is how we translated your sentence (showcased by the first 3 words):\n\n"

    var woerter = inputSentence.split(" ", 3);
    var IPAwoerter = inputSentenceIPA.split(" ", 3);
    
    for (let i = 0; i < 3; i++) {
        erklaerungstext += "<b>" + woerter[i] + "</b>";
        erklaerungstext += " → ";
        erklaerungstext += IPAwoerter[i];
        erklaerungstext += " | |  ";
        erklaerungstext += ipaElementsExplainer(IPAwoerter[i]);         // Added ein Baustein-Erklärung (Code ist ganz unten weil lang)

        erklaerungstext += "\n";
    }
    erklaerungstext += "\n";

    //Überschreibe Content des Popovers mit der Erklärung
    $('#inputSentence').popover('hide');
    $('#inputSentence').click(function () {
        $('#inputSentence').attr('data-content',erklaerungstext);
    $('#inputSentence').popover('show');
    });
   
function ipaElementsExplainer(outputIPAname){
        var elementsString = "";
        let zaehler = 0;
        let n = 1; //Anzahl an auszugebenden elements

        //cases für alle buchstaben
    if (outputIPAname.includes("ɪɹ") && zaehler < n) {
      elementsString += "ɪɹ ➔ ear / ɪˈɹ/";
      zaehler++;
    }

    if (outputIPAname.includes("ɛɹ") && zaehler < n) {
      elementsString += "ɛɹ ➔ air / ɛˈɹ/";
      zaehler++;
    }

    if (outputIPAname.includes("ɔɹ") && zaehler < n) {
      elementsString += "ɔɹ ➔ order / ɔˈɹdɚ/";
      zaehler++;
    }

    if (outputIPAname.includes("ɑɹ") && zaehler < n) {
      elementsString += "ɑɹ ➔ art / ɑˈɹt/";
      zaehler++;
    }

    if (outputIPAname.includes("ɔj") && zaehler < n) {
      elementsString += "ɔj ➔ oil / ɔjˈl/";
      zaehler++;
    }

    if (outputIPAname.includes("tʃ") && zaehler < n) {
      elementsString += "tʃ ➔ child / tʃajˈld/";
      zaehler++;
    }

    if (outputIPAname.includes("dʒ") && zaehler < n) {
      elementsString += "dʒ ➔ just / dʒʌˈst/";
      zaehler++;
    }

    if (outputIPAname.includes("i") && zaehler < n) {
      elementsString += "i ➔ even / iˈvɪn/";
      zaehler++;
    }

    if (outputIPAname.includes("ɪ") && zaehler < n) {
      elementsString += "ɪ ➔ if / ɪf/";
      zaehler++;
    }

    if (outputIPAname.includes("u") && zaehler < n) {
      elementsString += "u ➔ school / skuˈl//";
      zaehler++;
    }

    if (outputIPAname.includes("æ") && zaehler < n) {
      elementsString += "æ ➔ ask / æˈsk/";
      zaehler++;
    }

    if (outputIPAname.includes("ɑ") && zaehler < n) {
      elementsString += "ɑ ➔ father / fɑˈðɚ/";
      zaehler++;
    }

    if (outputIPAname.includes("ɛ") && zaehler < n) {
      elementsString += "ɛ ➔ said / sɛˈd/";
      zaehler++;
    }

    if (outputIPAname.includes("ʊ") && zaehler < n) {
      elementsString += "ʊ ➔ good / ɡʊˈd/";
      zaehler++;
    }

    if (outputIPAname.includes("ɔ") && zaehler < n) {
      elementsString += "ɔ ➔ all / ɔˈl/";
      zaehler++;
    }

    if (outputIPAname.includes("ʌ") && zaehler < n) {
      elementsString += "ʌ ➔ other /ʌˈðɚ/";
      zaehler++;
    }

    if (outputIPAname.includes("ɚ") && zaehler < n) {
      elementsString += "ɚ ➔ percent / pɚsɛˈnt/";
      zaehler++;
    }

    if (outputIPAname.includes("ŋ") && zaehler < n) {
      elementsString += "ŋ ➔ thing / θɪˈŋ/";
      zaehler++;
    }

    if (outputIPAname.includes("θ") && zaehler < n) {
      elementsString += "θ ➔ three / θɹiˈ//";
      zaehler++;
    }

    if (outputIPAname.includes("ð") && zaehler < n) {
      elementsString += "ð ➔ there / ðɛˈɹ/";
      zaehler++;
    }

    if (outputIPAname.includes("ʃ") && zaehler < n) {
      elementsString += "ʃ ➔ she / ʃiˈ/";
      zaehler++;
    }

    if (outputIPAname.includes("ʒ") && zaehler < n) {
      elementsString += "ʒ ➔ decision / dɪsɪˈʒʌn/";
      zaehler++;
    }

    if (outputIPAname.includes("j") && zaehler <n) {
      elementsString += "j ➔ yet / jɛˈt/";
      zaehler++;
    }

    if (outputIPAname.includes("ɹ") && zaehler < n) {
      elementsString += "ɹ ➔ right / ɹajˈt/";
      zaehler++;
    }

    if (outputIPAname.includes("ej") && zaehler < n) {
      elementsString += "ej ➔ able / ejˈbʌl/";
      zaehler++;
    }

    if (outputIPAname.includes("ow") && zaehler < n) {
      elementsString += "ow ➔ over / owˈvɚ/";
      zaehler++;
    }

    if (outputIPAname.includes("aj") && zaehler < n) {
      elementsString += "aj ➔ eyes / ajˈz/";
      zaehler++;
    }

    if (outputIPAname.includes("aw") && zaehler < n) {
      elementsString += "aw ➔ out / awˈt/";
      zaehler++;
    }

    return elementsString;
    }
</script>


</html>